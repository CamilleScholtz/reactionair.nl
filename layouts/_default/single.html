{{ define "main" }}
	<article>
		<section id="hero">
			<section class="authors">
				{{ range $index, $author := .Params.authors }}
					<a href="/auteurs/{{ urlize $author }}">{{ $author }}</a>
					{{ if eq $index (sub (len $.Params.authors) 2) }}
						&nbsp;&amp;&nbsp;
					{{ else if ne (add $index 1) (len $.Params.authors) }}
						&nbsp;,&nbsp;
					{{ end }}
				{{ end }}
			</section>

			<section class="title">
				<h1>{{ .Params.title | safeHTML }}</h1>
				<h2>{{ .Params.subtitle | safeHTML }}</h2>
			</section>

			<figure>
				{{ $image := .Resources.Get .Params.image }}
				{{ $anchor := "Smart" }}
				{{ if isset .Params "anchor" }}
					{{ $anchor = .Params.anchor }}
				{{ end }}

				{{ $1x := $image.Fill (printf "1035x500 webp %s" $anchor) }}
				{{ $2x := $image.Fill (printf "2070x1000 webp %s" $anchor) }}

				<img
					srcset="{{ $1x.RelPermalink }} 1x,
					        {{ $2x.RelPermalink }} 2x"
					src="{{ $2x.RelPermalink }}"
					alt="{{ if isset .Params "caption" }}{{ .Params.caption }}{{ else }}{{ .Params.title | safeHTML }}{{ end }}"
					style="background: {{ index $1x.Colors 0 }};">

				{{ if isset .Params "caption" }}
					<figcaption>{{ .Params.caption }}</figcaption>
				{{ end }}
			</figure>

			<section class="info">
				<time>{{ .Date.Day }} {{ index site.Data.months (printf "%d" .Date.Month) }}, {{ .Date.Year }}</time>

				<span class="pipe">â€”</span>

				<span class="eta" data-eta="{{ .ReadingTime }}">{{ .ReadingTime }} {{ if gt .ReadingTime 1 }}minuten{{ else }}minuut{{ end }} leestijd</span>
			</section>
		</section>

		<section class="content">
			{{ if eq .Params.themes "De Uylenspieghel" }}
				<section class="uylenspieghel">
					<img src="{{ "img/uylenspieghel.svg" | relURL }}" style="height: 240px">

					<small>Dit artikel is van satirische aard en dient met een korreltje zout genomen te worden.</small>
				</section>
			{{ end }}

			{{ if isset .Params "note" }}
				<section class="note">
					<small>
						{{ .Params.note | markdownify }}
					</small>
				</section>
			{{ end }}

			{{ .Content }}
		</section>
	</article>

	{{ if in (slice "Politiek en Actualiteit" "Cultuur en Maatschappij" "Religie en Wijsbegeerte" "Onderzoek en Speurwerk" "Geschiedenis en Biografie" "De Uylenspieghel") .Params.themes }}
		<section class="themes">
			{{ $pages := ((where .Site.RegularPages "Section" "articles").Related . | first 5) }}

			{{ partial "articles/theme.html" (dict
				"context" .
				"section" "related"
				"path"    "themas"
				"term"    .Params.themes
				"pages"   $pages
				"side"    "left"
			) }}
		</section>
	{{ end }}

	<section id="comments">
		{{ partial "comments/comments" . }}
	</section>
{{ end }}
