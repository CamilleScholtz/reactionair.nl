<div class="book-container">
	<div class="book small {{ if .animate }} animate {{ end }} {{ if .hover }} hover {{ end }}">
		{{ $thickness := add 5 (mul .pages 0.035) }}

		<img
			src="{{ (.front.Fit "660x440 webp").RelPermalink }}"
			loading="lazy"
			alt="{{ .title }}"
			class="cover"
			style="background: {{ index .front.Colors 0 }}; transform: translateZ({{ $thickness }}px);">
		{{ if .hover }}
			<div class="back" style="transform: translateZ({{ sub $thickness 1 }}px)"></div>
		{{ end }}
		<div class="pages" style="transform: translateX({{ sub 162 $thickness }}px) rotateY(90deg); width: {{ mul $thickness 1.98 }}px;"></div>
		<div class="back" style="transform: translateZ(-{{ sub $thickness 1 }}px);"></div>
		{{ if .hover }}
			<img
				src="{{ (.back.Fit "660x440 webp").RelPermalink }}"
				loading="lazy"
				alt="{{ .title | safeHTML }}"
				class="back"
				style="background: {{ index .back.Colors 0 }}; transform: translateZ(-{{ $thickness }}px) scaleX(-1);">
		{{ end }}
		<div class="shadow"></div>
	</div>
</div>

