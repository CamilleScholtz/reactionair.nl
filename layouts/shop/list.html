{{ define "main" }}
	<div class="filters">
		<span class="title">Uitgeverij:</span>

		<span class="filters-container">
			{{ range $publisher, $terms := site.Taxonomies.publishers }}
				{{ with site.GetPage $publisher }}
					<a href="{{ if eq .Params.title $.Params.title }}/winkel/{{ else }}/winkel/uitgeverij/{{ $publisher }}/{{ end }}" {{ if eq .Params.title $.Params.title }}class="active"{{ end }}>
						{{ .Params.title }}
					</a>
				{{ end }}
			{{ end }}
		</span>
	</div>

	<div class="filters">
		<span class="title">Taal:</span>

		<span class="filters-container">
			{{ range $language, $terms := site.Taxonomies.languages }}
				{{ with site.GetPage $language }}
					<a href="{{ if eq .Params.title $.Params.title }}/winkel/{{ else }}/winkel/taal/{{ $language }}/{{ end }}" {{ if eq .Params.title $.Params.title }}class="active"{{ end }}>
						{{ .Params.title }}
					</a>
				{{ end }}
			{{ end }}
		</span>
	</div>

	{{ $paginator := .Paginate .RegularPages.ByDate.Reverse }}

	<ul id="products">
		{{ range $paginator.Pages }}
			{{ with .Params.layout }}
				{{ continue }}
			{{ end }}

			<li class="product">
				<a href="{{ .RelPermalink }}">
					{{ partialCached "books/small.html" (dict
						"context" .
						"title"   .Params.title
						"front"   (.Resources.Get .Params.front)
						"back"    (.Resources.Get .Params.back)
						"pages"   .Params.pages
						"hover"	  true
					) .File.ContentBaseName }}
				</a>

				<div class="text">
					<a href="{{ .RelPermalink }}">
						<div class="author">{{ delimit .Params.writers ", " " & " }}</div>
						<h2>{{ .Params.title }}</h2>
						{{ if isset .Params "subtitle" }}
							<h3>{{ .Params.subtitle }}</h3>
						{{ end }}
					</a>

					{{ partial "shop/cart/small.html" (dict
						"title"       .Params.title
						"types"       .Params.types
						"checkout"    false
					) }}
				</div>
			</li>
		{{ end }}
	</ul>

	{{ partial "paginator.html" $paginator }}
{{ end }}
